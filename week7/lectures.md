# week7 lectures 笔记

## lecture 17 B-Tree 介绍（以及 2-3, 2-3-4 Trees）

### 1. θ 比 O 记法更准确

- BST 的高度在最差情况下是 θ(N)，表示 BST 的高度在最差情况下能达到 θ(N)
- BST 的高度在最优情况下是 θ(logN)，表示 BST 的高度在最优情况下能达到 θ(logN)
- BST 的高度是 O(N)，表示 BST 的高度总是小于等于 O(N)

前两种说法比第三种说法更准确，就像，旅馆A 的房间最高价是 640元/晚，旅馆B 的房间价都低于等于 640元/晚，我们可以大致判断旅馆A是个档次较高的旅馆，对于旅馆B 的档次则得不出什么判断，符合低于等于的情况太多了。旅馆 A 的说法就是 θ 表示的含义：会达到、等于，旅馆B 的说法就是 O 的含义：小于等于。

所以从实际情况下，big O 不表示 worst case，但现实生活中，big O 更常用，我们见到一个算法的运行时是 O(N)时，我们假定它想表达的是这个算法的 worst case 就是 N。

### 2. B-Tree：一种对 BST 结构的改进

BST（二分查找树）的高度增长最优是 O(logN)，最差是O(N)，B-Tree 在 BST 概念的基础上改进，使之避免最差的情况。B-Tree 的高度增长的最优最差情况都是 O(logN)。

B 树的特点是：

- 一个节点可以保存 1 到 L 个元素
- `contains` 操作跟普通 BST 几乎一样
- `add` 新添加的元素不再成为叶子节点，而加到同层的节点中，如果节点保存的元素的数量超过 L，则将其中一个元素移到父节点，同时将节点拆分。

B 树的高度增长来自子节点中的元素数量溢出而产生的 元素上升为父节点，并分割子节点 的操作。

从 B 树结构中可以得出两个不变式：
    1. 所有的叶子节点都和源节点的距离相等
    2. 一个有 k 个元素的非叶子节点，它的子节点数一定是 k + 1


2-3-4树，L=3 的 B树，每个节点最多保存 3 个元素，最多有 4 个子节点
2-3树，L=2 的 B树，每个节点最多由 2 个元素，最多有 3 个子节点
